(function(){angular.module("acReporteStock",[]).component("reporteStock",a());function a(){return{bindings:{},templateUrl:window.installPath+"/ac-angular-reportes/mv-reporte-stock.html",controller:b}}b.$inject=["StockService","SucursalesService","UserService","AcUtilsGlobals","StockVars"];function b(f,h,i,d,e){var g=this;g.sucursales=[];g.sucursal={};g.sucursal_id=i.getFromToken().data.sucursal_id;g.getData=c;h.get().then(function(k){g.sucursales=k;for(var j in g.sucursales){if(g.sucursales[j].sucursal_id==g.sucursal_id){g.sucursal=g.sucursales[j]}}c()});function c(){d.sucursal_id_search=g.sucursal.sucursal_id;f.get().then(function(l){g.stocks=[];for(var k in l){if(l[k].producto_tipo==0){l[k].cantidad=0;for(var j in l[k].stocks){if(l[k].stocks[j].sucursal_id==g.sucursal.sucursal_id){l[k].cantidad=l[k].cantidad+l[k].stocks[j].cant_actual}}g.stocks.push(l[k])}}d.sucursal_id_search=0;e.clearCache=true})}}})();